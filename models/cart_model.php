<?php/** * Модель * @author Vasya Hebryan - PhotoCamera e-Shop * @copyright © 2012 PhotoCamera e-Shop  *///////////////////////////////////////////////////////////** * Generation of page of an error at access out of system * Генерация страницы ошибки при доступе вне системы  */if(!defined('PHT_KEY')){    header("HTTP/1.1 404 Not Found");    exit(file_get_contents('./404.html'));}class Cart_Model{    public $total_sum;    private $res;             public function __construct()    {    }        /*    *     */    public function update()    {        $id = !empty($_POST['prod_id']) ? $_POST['prod_id'] : '';        $count = !empty($_POST['prod_count']) ? $_POST['prod_count'] : '';        if($count == 0)            unset($_SESSION['cart'][$id]);        elseif(!empty($_SESSION['cart'][$id]))        {            $_SESSION['cart'][$id]['count'] = $count;        }                    }        public function remove()    {        $_SESSION['cart'] = array();    }        /**     * Метод представления     * @param string $template     * @param string $mod     * @param string $link     * @return string     */    public function createRows($template)    {        $rows = '';        $tpl = getTpl($template);        $row['total_price'] = 0;                foreach($_SESSION['cart'] as $item)        {            $row['id']   = htmlspecialchars($item['id']);            $row['name']   = htmlspecialchars($item['name']);            $row['count'] = $item['count'];            $row['price'] = $item['price'];            $row['total_price'] = $row['price']*$row['count'];            $rows .= parseTpl($tpl, $row);            $this->total_sum += $row['total_price'];        }        return $rows;    }        }